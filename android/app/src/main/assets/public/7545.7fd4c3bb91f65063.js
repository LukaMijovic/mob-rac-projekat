"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7545],{7545:(N,u,l)=>{l.r(u),l.d(u,{FlightDetailsPageModule:()=>Y});var h=l(6895),Z=l(433),n=l(4556),s=l(1407),_=l(655),e=l(8256),m=l(529);class P{constructor(r,t,o){this.flightId=r,this.customerId=t,this.seatClass=o}}var T=l(4004);let v=(()=>{class i{constructor(t){this.http=t}chosePrice(t,o,a){const g=`Bearer ${localStorage.getItem("token")}`;let d=(new m.WM).set("Authorization",g).set("Content-Type","application/json");return this.http.post("http://localhost:8090/api/booking/v1/create",new P(o,t,a),{headers:d}).pipe((0,T.U)(f=>(console.log(f),f.success)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var p=l(1881);let b=(()=>{class i{constructor(t,o,a,c,g,d){this.alertController=t,this.priceListService=o,this.router=a,this.modalCtrl=c,this.route=g,this.flightService=d,this.priceList={id:-1,economy:-2,economyPlus:-3,preferredEconomy:-4,business:-5,firstClass:-6},this.modalHeader=""}ngOnInit(){this.flightService.getClassPrices(""+localStorage.getItem("flightId")).subscribe(t=>{this.priceList=t})}onCancel(){this.modalCtrl.dismiss()}presentAlert(t){return(0,_.mG)(this,void 0,void 0,function*(){t?yield(yield this.alertController.create({header:"Success!",subHeader:"Ticket reserved",message:"Your ticket has been reserved.",buttons:["OK"]})).present():yield(yield this.alertController.create({header:"Fail",subHeader:"Ticket is not reserved",message:"Your ticket has not been reserved.",buttons:["OK"]})).present()})}choosePrice(t){this.priceListService.chosePrice(Number(localStorage.getItem("userId")),Number(localStorage.getItem("flightId")),t).subscribe(o=>{this.presentAlert(o).then(()=>this.onCancel())})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.Br),e.Y36(v),e.Y36(s.F0),e.Y36(n.IN),e.Y36(s.gz),e.Y36(p.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-price-list-modal"]],decls:38,vars:5,consts:[["slot","primary"],["color","secondary",3,"click"],["name","close"],["button","","detail","true","detail-icon","caret-forward-outline",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Choose your class"),e.qZA(),e.TgZ(4,"ion-buttons",0)(5,"ion-button",1),e.NdJ("click",function(){return o.onCancel()}),e._UZ(6,"ion-icon",2),e.qZA()()()(),e.TgZ(7,"ion-content")(8,"ion-item",3),e.NdJ("click",function(){return o.choosePrice("ECONOMY")}),e.TgZ(9,"ion-label")(10,"h2"),e._uU(11,"Economy"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA()()(),e.TgZ(14,"ion-item",3),e.NdJ("click",function(){return o.choosePrice("ECONOMY_PLUS")}),e.TgZ(15,"ion-label")(16,"h2"),e._uU(17,"Economy Plus"),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA()()(),e.TgZ(20,"ion-item",3),e.NdJ("click",function(){return o.choosePrice("PREFERRED_ECONOMY")}),e.TgZ(21,"ion-label")(22,"h2"),e._uU(23,"Preferred Economy"),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.qZA()()(),e.TgZ(26,"ion-item",3),e.NdJ("click",function(){return o.choosePrice("BUSINESS")}),e.TgZ(27,"ion-label")(28,"h2"),e._uU(29,"Business"),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()()(),e.TgZ(32,"ion-item",3),e.NdJ("click",function(){return o.choosePrice("FIRST_CLASS")}),e.TgZ(33,"ion-label")(34,"h2"),e._uU(35,"First Class"),e.qZA(),e.TgZ(36,"p"),e._uU(37),e.qZA()()()()),2&t&&(e.xp6(13),e.hij("$",o.priceList.economy,""),e.xp6(6),e.hij("$",o.priceList.economyPlus,""),e.xp6(6),e.hij("$",o.priceList.preferredEconomy,""),e.xp6(6),e.hij("$",o.priceList.business,""),e.xp6(6),e.hij("$",o.priceList.firstClass,""))},dependencies:[n.YG,n.Sm,n.W2,n.Gu,n.gu,n.Ie,n.Q$,n.wd,n.sr],styles:["ion-item[_ngcontent-%COMP%]{align-items:center}p[_ngcontent-%COMP%]{color:gray}"]}),i})();var C=l(6554);function A(i,r){1&i&&(e.TgZ(0,"ion-buttons",5),e._UZ(1,"ion-back-button"),e.qZA())}function S(i,r){if(1&i&&(e.TgZ(0,"ion-title"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("Flight ",t.flight.id,"")}}function y(i,r){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"ion-spinner",7),e.qZA())}function M(i,r){if(1&i&&(e.TgZ(0,"div",8)(1,"ion-grid")(2,"ion-row")(3,"ion-col",9),e._UZ(4,"img",10),e.qZA(),e.TgZ(5,"ion-col",9)(6,"ion-label"),e._uU(7),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("src","https://www.cathaypacific.com/content/dam/header-footer/cx_brushwing_logo.originalimage.png",e.LSH),e.xp6(3),e.Oqu(t.flight.airlineName)}}function F(i,r){if(1&i&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE("",t.flight.arrivalScheduled.getHours(),":",t.flight.arrivalScheduled.getMinutes(),"")}}function L(i,r){if(1&i&&(e.TgZ(0,"ion-card")(1,"ion-grid")(2,"ion-row")(3,"ion-col",11)(4,"ion-label"),e._uU(5),e.qZA()(),e.TgZ(6,"ion-col",12),e._UZ(7,"ion-icon",13),e.qZA(),e.TgZ(8,"ion-col",11)(9,"ion-label"),e._uU(10),e.qZA()()(),e.TgZ(11,"ion-row")(12,"ion-col",14),e._UZ(13,"ion-icon",15),e.qZA()(),e.TgZ(14,"ion-row")(15,"ion-col")(16,"ion-label"),e._uU(17),e.qZA()()(),e.TgZ(18,"ion-row")(19,"ion-col",11)(20,"ion-label"),e._uU(21),e.qZA()(),e.TgZ(22,"ion-col",12),e._UZ(23,"ion-icon",16),e.qZA(),e.TgZ(24,"ion-col",11),e.YNc(25,F,2,2,"ion-label",1),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(5),e.Oqu(t.flight.iataCodeDep),e.xp6(5),e.Oqu(t.flight.iataCodeArr),e.xp6(7),e.Oqu(t.flight.flightDate),e.xp6(4),e.AsE("",t.flight.departureScheduled.getHours(),":",t.flight.departureScheduled.getMinutes(),""),e.xp6(4),e.Q6J("ngIf",1970!==t.flight.arrivalScheduled.getFullYear())}}function U(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"ion-fab",17)(1,"ion-fab-button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openModal())}),e._UZ(2,"ion-icon",19),e.qZA()()}}const D=[{path:"",component:(()=>{class i{constructor(t,o,a,c,g){this.router=t,this.route=o,this.flightService=a,this.navCtrl=c,this.modalCtrl=g,this.flight={id:9,flightDate:new Date,departureScheduled:new Date,arrivalScheduled:new Date,airlineName:"TEST9",airlineImage:"...9",airportCityDep:"BEOGRAD9",airportCityArr:"ZAGREB9",iataCodeDep:"BEG9",iataCodeArr:"ZGB9"},this.isLoading=!1,this.priceList={id:-1,economy:-2,economyPlus:-3,preferredEconomy:-4,business:-5,firstClass:-6}}ngOnInit(){this.route.paramMap.subscribe(t=>{t.has("id")?(this.isLoading=!0,this.flightService.getSpecificFlight(t.get("id")).subscribe(o=>{o.departureScheduled=new Date(o.departureScheduled),o.arrivalScheduled=new Date(o.arrivalScheduled),this.flight=o,this.isLoading=!1})):this.navCtrl.navigateBack("/home/flights")})}openModal(){this.modalCtrl.create({component:b}).then(t=>{t.present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(s.F0),e.Y36(s.gz),e.Y36(p.U),e.Y36(n.SH),e.Y36(n.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-flight-details"]],decls:11,vars:6,consts:[["slot","start",4,"ngIf"],[4,"ngIf"],["class","ion-text-center",4,"ngIf"],["id","div-img",4,"ngIf"],["slot","fixed","vertical","bottom","horizontal","center",4,"ngIf"],["slot","start"],[1,"ion-text-center"],["color","primary","name","lines"],["id","div-img"],["size","6"],["height","90","width","140",3,"src"],["size","4"],["size","3",1,"col-icon"],["name","arrow-forward-outline","size","large"],[1,"col-icon"],["name","calendar-outline","size","large"],["name","alarm-outline","size","large"],["slot","fixed","vertical","bottom","horizontal","center"],["color","secondary",3,"click"],["name","ticket"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar"),e.YNc(2,A,2,0,"ion-buttons",0),e.YNc(3,S,2,1,"ion-title",1),e.qZA()(),e.TgZ(4,"ion-content"),e.YNc(5,y,2,0,"div",2),e.YNc(6,M,8,2,"div",3),e.YNc(7,L,26,6,"ion-card",1),e.YNc(8,U,3,0,"ion-fab",4),e.qZA(),e.TgZ(9,"ion-footer"),e._UZ(10,"app-tab-bar"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(2),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading))},dependencies:[h.O5,n.oU,n.Sm,n.PM,n.wI,n.W2,n.IJ,n.W4,n.fr,n.jY,n.Gu,n.gu,n.Q$,n.Nd,n.PQ,n.wd,n.sr,n.cs,C.p],styles:["ion-card[_ngcontent-%COMP%]{text-align:center;margin:2rem;--background: var(--ion-color-main);--color: white}#div-img[_ngcontent-%COMP%]{text-align:center}ion-grid[_ngcontent-%COMP%]{border-radius:3rem;border:none;border-color:#fff;margin:1rem}ion-item[_ngcontent-%COMP%]{padding:0rem 1rem .5rem}ion-row[_ngcontent-%COMP%]{align-items:center;justify-content:space-between;margin-bottom:1.2rem}ion-col[_ngcontent-%COMP%]{text-align:center;justify-items:center}ion-label[_ngcontent-%COMP%]{font-size:1.1rem}.col-icon[_ngcontent-%COMP%]{margin:0;text-align:center;justify-items:center}"]}),i})()}];let I=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[s.Bz.forChild(D),s.Bz]}),i})();var x=l(5949),O=l(3072);let Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,Z.u5,n.Pc,I,x.FlightsPageModule,O.HomePageModule]}),i})()}}]);