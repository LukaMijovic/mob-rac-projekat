"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5949],{5949:(M,y,l)=>{l.r(y),l.d(y,{FlightsPageModule:()=>P});var m=l(6895),p=l(433),n=l(4556),v=l(1407);class Z{constructor(c,i,r){this.cityDep=c,this.cityArr=i,this.timeTravel=r}}var e=l(8256),d=l(1881),f=l(6554);function a(t,c){if(1&t&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.AsE("",i.flight.arrivalScheduled.getHours(),":",i.flight.arrivalScheduled.getMinutes(),"")}}const g=function(t){return["/","home","flights",t]};let h=(()=>{class t{constructor(){this.flight={id:9,flightDate:new Date,departureScheduled:new Date,arrivalScheduled:new Date,airlineName:"TEST9",airlineImage:"...9",airportCityDep:"BEOGRAD9",airportCityArr:"ZAGREB9",iataCodeDep:"BEG9",iataCodeArr:"ZGB9"}}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-flight"]],inputs:{flight:"flight"},decls:32,vars:11,consts:[["fill","outline"],[1,"col-icon"],["name","airplane"],[4,"ngIf"],["id","col-button"],["shape","round","expand","block",3,"routerLink"]],template:function(i,r){1&i&&(e.TgZ(0,"ion-item",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col")(4,"ion-label"),e._uU(5),e.qZA()()(),e.TgZ(6,"ion-row")(7,"ion-col")(8,"ion-label"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-col",1),e._UZ(11,"ion-icon",2),e.qZA(),e.TgZ(12,"ion-col")(13,"ion-label"),e._uU(14),e.qZA()()(),e.TgZ(15,"ion-row")(16,"ion-col")(17,"ion-label"),e._uU(18),e.qZA()(),e.TgZ(19,"ion-col")(20,"ion-label"),e._uU(21),e.qZA()()(),e.TgZ(22,"ion-row")(23,"ion-col")(24,"ion-label"),e._uU(25),e.qZA()(),e.TgZ(26,"ion-col"),e.YNc(27,a,2,2,"ion-label",3),e.qZA()(),e.TgZ(28,"ion-row")(29,"ion-col",4)(30,"ion-button",5),e._uU(31,"Details"),e.qZA()()()()()),2&i&&(e.xp6(5),e.Oqu(r.flight.airlineName),e.xp6(4),e.Oqu(r.flight.airportCityDep),e.xp6(5),e.Oqu(r.flight.airportCityArr),e.xp6(4),e.Oqu(r.flight.iataCodeDep),e.xp6(3),e.Oqu(r.flight.iataCodeArr),e.xp6(4),e.AsE("",r.flight.departureScheduled.getHours(),":",r.flight.departureScheduled.getMinutes(),""),e.xp6(2),e.Q6J("ngIf",1970!==r.flight.arrivalScheduled.getFullYear()),e.xp6(3),e.Q6J("routerLink",e.VKq(9,g,r.flight.id)))},dependencies:[m.O5,n.YG,n.wI,n.jY,n.gu,n.Ie,n.Q$,n.Nd,n.YI,v.rH],styles:["ion-grid[_ngcontent-%COMP%]{border-radius:3rem}ion-item[_ngcontent-%COMP%]{padding:0rem 1rem .5rem;--ion-background-color: var(--ion-color-second);--color: white}ion-row[_ngcontent-%COMP%]{align-items:center}ion-col[_ngcontent-%COMP%]{margin:.5rem;text-align:center;justify-items:center}.col-icon[_ngcontent-%COMP%]{margin:0;text-align:center;justify-items:center}ion-button[_ngcontent-%COMP%]{--background: white;--background-hover: grey;--background-activated: grey;--color: black;margin:1rem 0rem;text-align:center}#col-button[_ngcontent-%COMP%]{padding:0rem 30%}"]}),t})();const u=["flightsForm"],o=["calendarInput"];function C(t,c){1&t&&e._UZ(0,"app-flight",14),2&t&&e.Q6J("flight",c.$implicit)}const F=[{path:"",component:(()=>{class t{constructor(i,r){this.flightsService=i,this.alertController=r,this.flights=[],this.inputModel=""}ngOnInit(){}onInput(i){const s=i.target.value.replace(/[^0-9\/]+/g,"");this.calendarInput.value=this.inputModel=s}searchFlights(){let i=new Z(this.form.value.departures,this.form.value.arrivals,this.form.value.date);this.flightsService.searchFlights(i).subscribe(r=>{r.map(s=>{s.departureScheduled=new Date(s.departureScheduled),s.arrivalScheduled=new Date(s.arrivalScheduled)}),this.flights=r,0===this.flights.length&&this.alertController.create({header:"Fail",subHeader:"No flights found!",message:"There are no flights for this route and date.",buttons:["OK"]}).then(s=>{s.present()})})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(d.U),e.Y36(n.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-flights"]],viewQuery:function(i,r){if(1&i&&(e.Gf(u,7),e.Gf(o,7)),2&i){let s;e.iGM(s=e.CRH())&&(r.form=s.first),e.iGM(s=e.CRH())&&(r.calendarInput=s.first)}},decls:37,vars:3,consts:[[3,"ngSubmit"],["flightsForm","ngForm"],["size","5"],["fill","outline"],["color","secondary","position","floating"],["type","text","ngModel","","name","departures","required",""],["size","2"],["name","arrow-forward","size","large"],["type","text","ngModel","","name","arrivals","required",""],["type","text","ngModel","","name","date","placeholder","dd/MM/yyyy",3,"value","ionInput"],["calendarInput",""],[1,"ion-justify-content-center"],["type","submit","shape","round","expand","block",3,"disabled"],[3,"flight",4,"ngFor","ngForOf"],[3,"flight"]],template:function(i,r){if(1&i&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Welcome!"),e.qZA()()(),e.TgZ(4,"ion-content")(5,"h2"),e._uU(6,"AirSales"),e.qZA(),e.TgZ(7,"form",0,1),e.NdJ("ngSubmit",function(){return r.searchFlights()}),e.TgZ(9,"ion-grid")(10,"ion-row")(11,"ion-col",2)(12,"ion-item",3)(13,"ion-label",4),e._uU(14,"Departures"),e.qZA(),e._UZ(15,"ion-input",5),e.qZA()(),e.TgZ(16,"ion-col",6),e._UZ(17,"ion-icon",7),e.qZA(),e.TgZ(18,"ion-col",2)(19,"ion-item",3)(20,"ion-label",4),e._uU(21,"Arrivals"),e.qZA(),e._UZ(22,"ion-input",8),e.qZA()()(),e.TgZ(23,"ion-row")(24,"ion-col")(25,"ion-item",3)(26,"ion-label",4),e._uU(27,"Date"),e.qZA(),e.TgZ(28,"ion-input",9,10),e.NdJ("ionInput",function(S){return r.onInput(S)}),e.qZA()()()(),e.TgZ(30,"ion-row",11)(31,"ion-col")(32,"ion-button",12),e._uU(33,"Search"),e.qZA()()()()(),e.YNc(34,C,1,1,"app-flight",13),e.qZA(),e.TgZ(35,"ion-footer"),e._UZ(36,"app-tab-bar"),e.qZA()),2&i){const s=e.MAs(8);e.xp6(28),e.Q6J("value",r.inputModel),e.xp6(4),e.Q6J("disabled",s.invalid),e.xp6(2),e.Q6J("ngForOf",r.flights)}},dependencies:[m.sg,p._Y,p.JJ,p.JL,p.Q7,p.On,p.F,n.YG,n.wI,n.W2,n.fr,n.jY,n.Gu,n.gu,n.pK,n.Ie,n.Q$,n.Nd,n.wd,n.sr,n.j9,f.p,h],styles:["h2[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%]{padding:2rem 3rem}ion-col[_ngcontent-%COMP%]{text-align:center}ion-row[_ngcontent-%COMP%]{align-items:center;margin:2rem 0rem}ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-main);--background-hover: var(--ion-color-main-hover);--background-activated: var(--ion-color-main-pressed);--color: white;margin:1rem 0rem}"]}),t})()},{path:":id",loadChildren:()=>l.e(7545).then(l.bind(l,7545)).then(t=>t.FlightDetailsPageModule)}];let A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(F),v.Bz]}),t})();var b=l(3072);let P=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,p.u5,n.Pc,A,b.HomePageModule]}),t})()},1881:(M,y,l)=>{l.d(y,{U:()=>e});var m=l(529);class p{constructor(f,a,g,h,u,o,C,T,F,A){this.id=f,this.flightDate=a,this.departureScheduled=g,this.arrivalScheduled=h,this.airlineName=u,this.airlineImage=o,this.airportCityDep=C,this.airportCityArr=T,this.iataCodeDep=F,this.iataCodeArr=A}}var n=l(4004);class v{constructor(f,a,g,h,u,o){this.id=f,this.economy=a,this.economyPlus=g,this.preferredEconomy=h,this.business=u,this.firstClass=o}}var Z=l(8256);let e=(()=>{class d{constructor(a){this.http=a}searchFlights(a){console.log(a.cityDep+" "+a.cityArr+" "+a.timeTravel);const h=`Bearer ${localStorage.getItem("token")}`;let u=(new m.WM).set("Authorization",h).set("Content-Type","application/json");return this.http.post("http://localhost:8090/api/flight/v2/get/scheduled/0",a,{headers:u}).pipe((0,n.U)(o=>(console.log("Dobio odgovor!"),console.log(o),console.log(o.content),o.content)))}getClassPrices(a){const g=`http://localhost:8090/api/pricelist/v1/flight/${a}`,h=`Bearer ${localStorage.getItem("token")}`;let u=(new m.WM).set("Authorization",h).set("Content-Type","application/json");return this.http.get(g,{headers:u}).pipe((0,n.U)(o=>new v(o.id,o.economy,o.economyPlus,o.preferredEconomy,o.business,o.firstClass)))}getSpecificFlight(a){const g=`http://localhost:8090/api/flight/v1/get/${a}/scheduled`,h=`Bearer ${localStorage.getItem("token")}`;let u=(new m.WM).set("Authorization",h).set("Content-Type","application/json");return this.http.get(g,{headers:u}).pipe((0,n.U)(o=>(localStorage.setItem("flightId",""+o.id),new p(o.id,o.flightDate,o.departureScheduled,o.arrivalScheduled,o.airlineName,o.airlineImage,o.airportCityDep,o.airportCityArr,o.iataCodeDep,o.iataCodeArr))))}}return d.\u0275fac=function(a){return new(a||d)(Z.LFG(m.eN))},d.\u0275prov=Z.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);