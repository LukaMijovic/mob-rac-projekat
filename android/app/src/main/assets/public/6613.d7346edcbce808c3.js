"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6613],{6613:(y,l,a)=>{a.r(l),a.d(l,{ReservationPageModule:()=>A});var s=a(6895),d=a(433),o=a(4556),v=a(1407),e=a(8256),u=a(3641),p=a(6554),g=a(655);let h=(()=>{class t{constructor(n,r){this.reservationService=n,this.alertController=r,this.reservation={id:-1,flightDate:new Date,departuresScheduled:new Date,arrivalScheduled:new Date,airlineName:"TEST",iataCodeDep:"TST1",iataCodeArr:"TST2",seatCode:"TEST",seatClass:"TEST",amount:-999}}ngOnInit(){}presentAlert(n){return(0,g.mG)(this,void 0,void 0,function*(){n?yield(yield this.alertController.create({header:"Success!",subHeader:"Reservation cancelled",message:"Your reservation has been deleted.",buttons:["OK"]})).present():yield(yield this.alertController.create({header:"Fail",subHeader:"Reservation is not cancelled",message:"Your reservation has not been deleted.",buttons:["OK"]})).present()})}updateReservationsArray(){let n=[];for(let r=0;r<this.reservationService.reservations.length;r++)this.reservationService.reservations[r].id!=this.reservation.id&&n.push(this.reservationService.reservations[r]);this.reservationService.reservations=n}cancelReservation(n){this.reservationService.cancelReservation(n).subscribe(r=>{this.presentAlert(r).then(()=>{this.updateReservationsArray()})})}buyReservation(n){this.reservationService.buyReservation(n).subscribe(r=>{r&&this.alertController.create({header:"Success!",subHeader:"Reservation is purchased",message:"Your reservation has been purchased.",buttons:["OK"]}).then(c=>{c.present().then(()=>{this.updateReservationsArray()})})})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.D),e.Y36(o.Br))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reservation-component"]],inputs:{reservation:"reservation"},decls:18,vars:6,consts:[["color","light"],["fill","clear","color","primary","size","large","shape","round",3,"click"],["fill","clear","slot","end","shape","round",3,"click"],["name","trash","color","danger","size","large"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-subtitle"),e._uU(3),e.qZA(),e.TgZ(4,"ion-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"ion-card-subtitle"),e._uU(7),e.qZA()(),e.TgZ(8,"ion-card-content")(9,"ion-card-title"),e._uU(10),e.qZA(),e.TgZ(11,"ion-card-subtitle"),e._uU(12),e.qZA()(),e.TgZ(13,"ion-buttons")(14,"ion-button",1),e.NdJ("click",function(){return r.buyReservation(r.reservation.id)}),e._uU(15,"Buy"),e.qZA(),e.TgZ(16,"ion-button",2),e.NdJ("click",function(){return r.cancelReservation(r.reservation.id)}),e._UZ(17,"ion-icon",3),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(r.reservation.flightDate),e.xp6(2),e.AsE("",r.reservation.iataCodeDep," - ",r.reservation.iataCodeArr,""),e.xp6(2),e.Oqu(r.reservation.airlineName),e.xp6(3),e.hij("Your seat code is: ",r.reservation.seatCode,""),e.xp6(2),e.hij("$",r.reservation.amount,""))},dependencies:[o.YG,o.Sm,o.PM,o.FN,o.Zi,o.tO,o.Dq,o.gu],styles:["ion-card[_ngcontent-%COMP%]{margin:2rem 2rem 0}ion-card-header[_ngcontent-%COMP%]{text-align:center}ion-buttons[_ngcontent-%COMP%]{justify-content:space-between;margin:0 2rem 1rem}"]}),t})();function m(t,i){1&t&&(e.TgZ(0,"ion-buttons",3),e._UZ(1,"ion-back-button"),e.qZA())}function f(t,i){1&t&&(e.TgZ(0,"div",4),e._UZ(1,"ion-spinner",5),e.qZA())}function R(t,i){1&t&&e._UZ(0,"app-reservation-component",7),2&t&&e.Q6J("reservation",i.$implicit)}function Z(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,R,1,1,"app-reservation-component",6),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.reservationService.reservations)}}const T=[{path:"",component:(()=>{class t{constructor(n){this.reservationService=n,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.reservationService.getAllReservations().subscribe(n=>{n.map(r=>{r.departuresScheduled=new Date(r.departuresScheduled),r.arrivalScheduled=new Date(r.arrivalScheduled)}),this.reservationService.reservations=n,this.isLoading=!1})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reservation"]],decls:10,vars:3,consts:[["slot","start",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],["slot","start"],[1,"ion-text-center"],["color","primary","name","lines"],[3,"reservation",4,"ngFor","ngForOf"],[3,"reservation"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar"),e.YNc(2,m,2,0,"ion-buttons",0),e.TgZ(3,"ion-title"),e._uU(4,"Your reservations"),e.qZA()()(),e.TgZ(5,"ion-content"),e.YNc(6,f,2,0,"div",1),e.YNc(7,Z,2,1,"div",2),e.qZA(),e.TgZ(8,"ion-footer"),e._UZ(9,"app-tab-bar"),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",!r.isLoading),e.xp6(4),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.Q6J("ngIf",!r.isLoading))},dependencies:[s.sg,s.O5,o.oU,o.Sm,o.W2,o.fr,o.Gu,o.PQ,o.wd,o.sr,o.cs,p.p,h]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(T),v.Bz]}),t})();var S=a(3072);let A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,d.u5,o.Pc,b,S.HomePageModule]}),t})()}}]);